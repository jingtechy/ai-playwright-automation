<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AI Playwright Test Generator</title>
    <style>
      body{font-family:system-ui,Segoe UI,Helvetica,Arial;margin:20px}
      textarea{width:100%;height:120px}
      pre{background:#f6f8fa;padding:10px}
    </style>
  </head>
  <body>
    <h1>AI Playwright Test Generator</h1>
    <p>Target site: <a href="https://the-internet.herokuapp.com" target="_blank">the-internet.herokuapp.com</a></p>
    <label>Scenario (natural language):</label>
    <textarea id="scenario">Test the checkboxes</textarea>
    <div style="margin-top:8px">
      <button id="gen">Generate</button>
      <button id="run">Generate & Run</button>
    </div>

    <h3>Generated Test</h3>
    <pre id="code">(not generated yet)</pre>

    <h3>AI Suggestions</h3>
    <ul id="suggestions"></ul>

    <h3>Run Results</h3>
    <pre id="results">(not run)</pre>

    <script>
      async function post(path, body) {
        const r = await fetch(path, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });
        return r.json();
      }
      document.getElementById('gen').onclick = async () => {
        const scenario = document.getElementById('scenario').value;
        const j = await post('/generate', { scenario });
        document.getElementById('code').textContent = j.code || j.error || '';
        const ul = document.getElementById('suggestions'); ul.innerHTML = '';
        (j.suggestions || []).forEach(s => { const li = document.createElement('li'); li.textContent = s; ul.appendChild(li); });
      };
      document.getElementById('run').onclick = async () => {
        const scenario = document.getElementById('scenario').value;
        const j = await post('/generate-and-run', { scenario });
        document.getElementById('code').textContent = j.code || j.error || '';
        const ul = document.getElementById('suggestions'); ul.innerHTML = '';
        (j.suggestions || []).forEach(s => { const li = document.createElement('li'); li.textContent = s; ul.appendChild(li); });
        document.getElementById('results').textContent = JSON.stringify(j.result || j.error, null, 2);
      };
    </script>
  </body>
 </html>
